<section>
    <div class="page-header">
        <ul class="nav nav-tabs">
            <li><a href="#/practice-management-general" ui-sref="practice-management-general">General</a></li>
            <li><a data-translate="practiceManagement.conditions" href="#/practice-management-conditions" ui-sref="practice-management-conditions">Conditions</a></li>
            <li><a data-translate="practiceManagement.thingsToWorkWith.title" href="#/practice-management-thingswork" ui-sref="practice-management-thingswork">Things to work with</a></li>
            <li class="active"><a data-translate="practiceManagement.thingsToDo.title">Things to do </a></li>
        </ul>
    </div>
    <div class="alert top-right alert-danger" ng-show="vm.error">
        <button class="close" type="button" ng-click="vm.error=false">x</button>
        <h4>Error!</h4>
        <strong><span data-translate="{{vm.mensaje}}"></span></strong>
    </div>
    <div class="row" ng-hide="!vm.practice.thingsToDo.activities.length">
        <div class="actions">
            <button class="btn btn-primary btn-round btn-lg pull-right m-b-30 col-xs-2 m-r-15"
                    ng-click="vm.compositionActivities()"
                    data-toggle="modal" title="Composition"
                    data-target="#compositionActivitiesDialog">
                <div class="ripple-wrapper"></div>
                <i class="fa fa-area-chart"></i>
            </button>
            <button class="btn btn-primary btn-round btn-lg pull-right col-xs-2 m-r-10"
                    ng-click="vm.clean()" data-title="New activity">
                <span class="md md-add"></span>
            </button>
        </div>
        <div class="col-xs-12">
            <div class="well white">
                <div class="table-responsive white">
                    <table class="table table-full table-full-small white">
                        <thead>
                            <tr>
                                <th data-translate="practiceManagement.thingsToDo.spaceActivity">Activity Space</th>
                                <th data-translate="practiceManagement.thingsToDo.activity">Activity</th>
                                <th data-translate="practiceManagement.thingsToDo.briefDescription">Brief Description</th>
                                <th data-translate="practiceManagement.remove">Delete</th>
                                <th data-translate="practiceManagement.edit">Edit</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="spaceActivity in vm.practice.thingsToDo.activities">
                                <td>{{spaceActivity.nameActivitySpace}}</td>
                                <td>{{spaceActivity.name}}</td>
                                <td>{{spaceActivity.briefDescription}}</td>
                                <td>
                                    <button class="btn btn-link btn-round"
                                            ng-click="vm.deleteActivity($index)">
                                        <i class="md md-delete"></i>
                                    </button>
                                </td>
                                <td>
                                    <button class="btn btn-link btn-round"
                                            ng-click="vm.editActivity($index)">
                                        <i class="md md-edit"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <!-- Activity space-->
    <div class="row">
        <div class="col-md-12">
            <div class="well white">
                <div class="form-group filled">
                    <label data-translate="practiceManagement.thingsToDo.areaOfConcern" class="f-bold">Area of concern</label>
                    <select class="form-control" ng-options="datos.name for datos in vm.areasOfConcern track by datos.id" ng-model="vm.areaOfConcern">
                        <option style="display:none" value="" data-translate="entity.select.select">Select</option>
                    </select>
                    <div>
                        <p class="help-block"
                           ng-show="!vm.areaOfConcern" data-translate="entity.validation.required">
                            This field is required.
                        </p>
                    </div>
                </div>
                <div class="form-group filled" ng-show="vm.areaOfConcern != null">
                    <label data-translate="practiceManagement.thingsToDo.spaceActivity" class="f-bold">Activity Space</label>
                    <select class="form-control" ng-options="datos.name for datos in vm.areaOfConcern.activitySpaces track by datos.id" ng-model="vm.activitySpace">
                        <option style="display:none" value="" data-translate="entity.select.select">Select</option>
                    </select>
                    <div>
                        <p class="help-block"
                           ng-show="!vm.activitySpace" data-translate="entity.validation.required">
                            This field is required.
                        </p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label f-bold" data-translate="practiceManagement.thingsToDo.activityName">Activity Name</label>
                    <input type="text" class="form-control" name="nombre" ng-model="vm.activityInEdition.name" maxlength="80">
                    <div>
                        <p class="help-block"
                           ng-show="!vm.activityInEdition.name" data-translate="entity.validation.required">
                            This field is required.
                        </p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label f-bold" data-translate="practiceManagement.thingsToDo.briefDescription">Brief Description</label>
                    <textarea class="form-control" name="briefDescription" ng-model="vm.activityInEdition.briefDescription" maxlength="250"></textarea>
                    <div>
                        <p class="help-block"
                           ng-show="!vm.activityInEdition.briefDescription" data-translate="entity.validation.required">
                            This field is required.
                        </p>
                    </div>
                </div>
                <div>
                    <label for="textArea" data-translate="practiceManagement.description" class="f-bold">Description</label>
                    <fieldset>
                        <legend></legend>
                        <div class="form-group">
                            <text-angular-toolbar name="toolbar1" ta-toolbar="[['h1','h2','h3','h4','p','redo','undo','indent','outdent']]"></text-angular-toolbar>
                            <text-angular-toolbar name="toolbar2" ta-toolbar="[['bold','italics','underline','strikeThrough','ul','ol'],['justifyLeft','justifyCenter','justifyRight','justifyFull']]"></text-angular-toolbar>
                            <text-angular name="htmlcontent" ng-model="vm.activityInEdition.description" ta-target-toolbars='toolbar1,toolbar2,toolbar3'></text-angular>
                            <text-angular-toolbar name="toolbar3" ta-toolbar="[['html', 'charcount', 'wordcount']]"></text-angular-toolbar>
                        </div>
                    </fieldset>
                    <div>
                        <p class="help-block"
                           ng-show="!vm.activityInEdition.description" data-translate="entity.validation.required">
                            This field is required.
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12">
                        <div class=" table-responsive white m-t-50">
                            <table class="table table-full table-full-small white ">
                                <thead>
                                    <tr>
                                        <th colspan="3" class="text-center title-table-activity">
                                            <span data-translate="practiceManagement.thingsToDo.competency">
                                                COMPETENCY
                                            </span>
                                            <button type="button"
                                                    ng-class="!vm.activityInEdition.competencies.length ? 'btn btn-sm btn-danger btn-round pull-right' :
                                                                'btn btn-sm btn-primary btn-round pull-right'"
                                                    data-toggle="collapse" data-target="#competency"
                                                    title="Create competency">
                                                <i class="fa fa-arrow-down" aria-hidden="true"></i>
                                            </button>
                                        </th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="collapse" id="competency">
                    <div class="row">
                        <div class="col-xs-11 m-l-40">
                            <div class="form-group filled ">
                                <label data-translate="practiceManagement.thingsToDo.competency">Competency</label>
                                <select class="form-control" ng-options="datos.name for datos in vm.competencies track by datos.id"
                                        ng-model="vm.competency">
                                    <option style="display:none" value="" data-translate="entity.select.select">Select</option>
                                </select>
                                <div>
                                    <p class="help-block"
                                       ng-show="!vm.competency" data-translate="entity.validation.required">
                                        This field is required.
                                    </p>
                                </div>
                            </div>
                            <div class="form-group filled" ng-hide="!vm.competency">
                                <label data-translate="practiceManagement.thingsToDo.competencyLevel">Competency Level</label>
                                <select class="form-control" ng-options="datos.level + '. '+ datos.name for datos in vm.competency.competencyLevel | filter:vm.competenciesFilter"
                                        ng-model="vm.competencyLevel">
                                    <option style="display:none" value="" data-translate="entity.select.select">Select</option>
                                </select>
                                <div>
                                    <p class="help-block"
                                       ng-show="!vm.competencyLevel" data-translate="entity.validation.required">
                                        This field is required.
                                    </p>
                                </div>
                            </div>
                            <div class="pull-right">
                                <button class="btn btn-default" type="button" ng-click="vm.cleanModales()"><span data-translate="practiceManagement.clean">Clean</span></button>
                                <button type="button" class="btn btn-primary" ng-click="vm.addCompetency()" data-translate="practiceManagement.add">Add</button>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">
                            <div class="table-responsive white m-t-50">
                                <table class="table table-full table-full-small white ">
                                    <thead>
                                        <tr ng-hide="!vm.activityInEdition.competencies.length">
                                            <th data-translate="practiceManagement.thingsToDo.competency">Competency</th>
                                            <th data-translate="practiceManagement.thingsToDo.competencyLevel">Level Competency</th>
                                            <th data-translate="practiceManagement.remove">Delete</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="competency in vm.activityInEdition.competencies">
                                            <td>{{competency.competency}}</td>
                                            <td>{{competency.competencyLevel}}</td>
                                            <td><button class="btn btn-link btn-round" ng-click="vm.deleteCompetency($index)"><i class="md md-delete"></i></button></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12">
                        <div class="table-responsive white m-t-50">
                            <table class="table table-full table-full-small white">
                                <thead>
                                    <tr>
                                        <th class="text-center title-table-activity">
                                            <span data-translate="practiceManagement.thingsToDo.approach">
                                                APPROACH
                                            </span>
                                            <button type="button"
                                                    ng-class="!vm.activityInEdition.approaches.length ? 'btn btn-sm btn-danger btn-round pull-right':
                                                                'btn btn-sm btn-primary btn-round pull-right'"
                                                    data-toggle="collapse" data-target="#approach"
                                                    title="Create approach">
                                                <i class="fa fa-arrow-down" aria-hidden="true"></i>
                                            </button>
                                        </th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="collapse" id="approach">
                    <div class="row">
                        <div class="col-xs-11 m-l-40">
                            <div class="form-group">
                                <label class="pull-left" data-translate="practiceManagement.thingsToDo.name">Name</label>
                                <input type="text" class="form-control" ng-model="vm.nameApproach">
                                <div>
                                    <p class="help-block"
                                       ng-show="!vm.nameApproach" data-translate="entity.validation.required">
                                        This field is required.
                                    </p>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="well white">
                                    <label for="textArea" data-translate="practiceManagement.description" class="f-bold">Description</label>
                                    <fieldset>
                                        <legend></legend>
                                        <div class="form-group">
                                            <text-angular-toolbar name="toolbar4" ta-toolbar="[['h1','h2','h3','h4','p','redo','undo','indent','outdent']]"></text-angular-toolbar>
                                            <text-angular-toolbar name="toolbar5" ta-toolbar="[['bold','italics','underline','strikeThrough','ul','ol'],['justifyLeft','justifyCenter','justifyRight','justifyFull']]"></text-angular-toolbar>
                                            <text-angular ng-model="vm.descriptionApproach" ta-target-toolbars='toolbar4,toolbar5,toolbar6'></text-angular>
                                            <text-angular-toolbar name="toolbar6" ta-toolbar="[['html', 'charcount', 'wordcount']]"></text-angular-toolbar>
                                        </div>
                                    </fieldset>
                                    <div>
                                        <p class="help-block"
                                           ng-show="!vm.descriptionApproach" data-translate="entity.validation.required">
                                            This field is required.
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="pull-right">
                                <button class="btn btn-default" type="button" ng-click="vm.cleanModales()"><span data-translate="practiceManagement.clean">Clean</span></button>
                                <button type="button" class="btn btn-primary" ng-click="vm.addApproach()"><span data-translate="practiceManagement.add">Add</span></button>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">
                            <div class="table-responsive white m-t-50">
                                <table class="table table-full table-full-small white">
                                    <thead>
                                        <tr ng-hide="!vm.activityInEdition.approaches.length">
                                            <th data-translate="practiceManagement.thingsToDo.name">Name</th>
                                            <th data-translate="practiceManagement.description">Description</th>
                                            <th data-translate="practiceManagement.remove">Delete</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="approach in vm.activityInEdition.approaches">
                                            <td>{{approach.name}}</td>
                                            <td><div ng-bind-html="approach.description"></div></td>
                                            <td><button class="btn btn-link btn-round" ng-click="vm.deleteApproach($index)"><i class="md md-delete"></i></button></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12">
                        <div class="table-responsive white m-t-50">
                            <table class="table table-full table-full-small white">
                                <thead>
                                    <tr>
                                        <th colspan="3" class="text-center title-table-activity">
                                            <span data-translate="practiceManagement.thingsToDo.action">
                                                ACTIONS
                                            </span>
                                            <button type="button"
                                                    ng-class="!vm.activityInEdition.actions.length ?
                                                                'btn btn-sm btn-danger btn-round pull-right' :
                                                                'btn btn-sm btn-primary btn-round pull-right'"
                                                    data-toggle="collapse" data-target="#action"
                                                    title="Create action">
                                                <i class="fa fa-arrow-down" aria-hidden="true"></i>
                                            </button>
                                        </th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="collapse" id="action">
                    <div class="row">
                        <div class="col-xs-11 m-l-40">
                            <div class="form-group filled">
                                <label class="pull-left" data-translate="practiceManagement.thingsToDo.actionKind">Action Kind</label>
                                <select class="form-control" ng-options="datos.id as datos.name for datos in vm.actionsKinds" ng-model="vm.actionInEdition.idActionKind">
                                    <option style="display:none" value="" data-translate="entity.select.select">Select</option>
                                </select>
                                <div>
                                    <p class="help-block"
                                       ng-show="!vm.actionInEdition.idActionKind" data-translate="entity.validation.required">
                                        This field is required.
                                    </p>
                                </div>
                            </div>
                            <div class="form-group filled" ng-hide="vm.actionInEdition.workProductsLevelofDetail.length ||
                                 vm.workProduct">
                                <label class="pull-left">Alpha</label>
                                <select class="form-control" ng-options="datos.name for datos in vm.alphas track by datos.id"
                                        ng-model="vm.alpha" ng-disabled="vm.workProduct != null">
                                    <option style="display:none" value="" data-translate="entity.select.select">Select</option>
                                </select>
                                <div>
                                    <p class="help-block"
                                       ng-show="!vm.alpha && !vm.actionInEdition.alphaStates.length"
                                       data-translate="entity.validation.required">
                                        This field is required.
                                    </p>
                                </div>
                            </div>
                            <div class="form-group filled" ng-show="vm.alpha != null">
                                <label>Alpha State</label>
                                <select class="form-control" ng-options="datos.name for datos in vm.alpha.states  | filter:vm.alphaStateFilter track by datos.id"
                                        ng-model="vm.alphaState">
                                    <option style="display:none" value="" data-translate="entity.select.select">Select</option>
                                </select>
                                <div>
                                    <p class="help-block"
                                       ng-show="!vm.alphaState" data-translate="entity.validation.required">
                                        This field is required.
                                    </p>
                                </div>
                            </div>
                            <div class="form-group filled" ng-hide="vm.actionInEdition.alphaStates.length || vm.alpha">
                                <label class="pull-left">Workproduct</label>
                                <select class="form-control" ng-options="datos.name for datos in vm.workProducts track by datos.id"
                                        ng-disabled="vm.alpha != null" ng-model="vm.workProduct">
                                    <option style="display:none" value="" data-translate="entity.select.select">Select</option>
                                </select>
                                <div>
                                    <p class="help-block"
                                       ng-show="!vm.workProduct && !vm.actionInEdition.workProductsLevelofDetail.length"
                                       data-translate="entity.validation.required">
                                        This field is required.
                                    </p>
                                </div>
                            </div>
                            <div class="form-group filled" ng-show="vm.workProduct != null">
                                <label>Level of Detail</label>
                                <select class="form-control" ng-options="datos.name for datos in vm.workProduct.levelsOfDetails | filter:vm.workProductsFilter track by datos.id"
                                        ng-model="vm.levelOfDetail">
                                    <option style="display:none" value="" data-translate="entity.select.select">Select</option>
                                </select>
                                <div>
                                    <p class="help-block"
                                       ng-show="!vm.levelOfDetail" data-translate="entity.validation.required">
                                        This field is required.
                                    </p>
                                </div>
                            </div>
                            <div class="pull-right">
                                <button class="btn btn-default" type="button" ng-click="vm.cleanModales()"><span data-translate="practiceManagement.clean">Clean</span></button>
                                <button type="button" class="btn btn-primary" ng-click="vm.fillAction()"><span data-translate="practiceManagement.add">Add</span></button>
                            </div>
                        </div>
                    </div>
                    <div class="row m-t-30" ng-hide="!vm.actionInEdition.alphaStates.length && !vm.actionInEdition.workProductsLevelofDetail.length">
                        <div class="m-l-30">
                            <span class="blue badge f13">{{vm.actionInEdition.idActionKind}}</span>
                        </div>
                        <div class="col-xs-12 m-t-20">
                            <div>
                                <button ng-repeat="actionElement in vm.actionInEdition.alphaStates" class="btn btn-default col-xs-4 f12 m-b-20 m-l-10 m-r-10">
                                    <i class="fa fa-times text-blue f20 m-l-90" aria-hidden="true" ng-click="vm.deleteActionElement($index, 'alpha')"> </i>
                                    <p>{{actionElement.description}}</p>
                                </button>
                                <button ng-repeat="actionElement in vm.actionInEdition.workProductsLevelofDetail" class="btn btn-default col-xs-4 f12 m-b-20 m-l-10 m-r-10">
                                    <i class="fa fa-times text-blue" aria-hidden="true" ng-click="vm.deleteActionElement($index, 'workproduct')"> </i>
                                    <p>{{actionElement.description}}</p>
                                </button>
                            </div>
                        </div>
                        <button type="button" class="btn btn-primary pull-right m-r-70" ng-click="vm.addAction()">Save</button>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">
                            <div class="table-responsive white m-t-50">
                                <table class="table table-full table-full-small white">
                                    <thead>
                                        <tr ng-hide="!vm.activityInEdition.actions.length">
                                            <th data-translate="practiceManagement.thingsToDo.actionKind">Action Kind</th>
                                            <th>Alpha-State / Workproduct-Level of detail</th>
                                            <th data-translate="practiceManagement.remove">Delete</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat-start="alphaState in vm.activityInEdition.actions">
                                            <td>{{alphaState.idActionKind}}</td>
                                            <td>
                                                <ul>
                                                    <li ng-repeat="alphaOrWorkproduct in alphaState.alphaStates">
                                                        {{alphaOrWorkproduct.description}}
                                                    </li>
                                                </ul>
                                                <ul>
                                                    <li ng-repeat="alphaOrWorkproduct in alphaState.workProductsLevelofDetail">
                                                        {{alphaOrWorkproduct.description}}
                                                    </li>
                                                </ul>
                                            </td>
                                            <td><button class="btn btn-link btn-round" ng-click="vm.deleteAction($index, 'alpha')"><i class="md md-delete"></i></button></td>
                                        </tr>
                                        <tr ng-repeat-end></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12">
                        <div class="table-responsive white m-t-50">
                            <table class="table table-full table-full-small white">
                                <thead>
                                    <tr>
                                        <th class="text-center title-table-activity">
                                            <span data-translate="practiceManagement.entries">
                                                ENTRIES
                                            </span>
                                            <button type="button"
                                                    ng-class="!vm.activityInEdition.entryCriterion.alphaStates.length &&
                                                                !vm.activityInEdition.entryCriterion.workProductsLevelofDetail.length &&
                                                                !vm.activityInEdition.entryCriterion.otherConditions.length ?
                                                                'btn btn-sm btn-danger btn-round pull-right': 'btn btn-sm btn-primary btn-round pull-right'"
                                                    data-toggle="collapse" data-target="#entry"
                                                    title="Create entry">
                                                <i class="fa fa-arrow-down" aria-hidden="true"></i>
                                            </button>
                                        </th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="collapse" id="entry">
                    <div class="row">
                        <div class="col-xs-11 m-l-40">
                            <div class="form-group filled" ng-hide="vm.workProduct || vm.anotherEntryCriteria">
                                <label class="pull-left">Alpha</label>
                                <select class="form-control" ng-options="datos.name for datos in vm.alphas track by datos.id"
                                        ng-model="vm.alpha" ng-disabled="vm.workProduct || vm.anotherEntryCriteria">
                                    <option style="display:none" value="" data-translate="entity.select.select">Select</option>
                                </select>
                            </div>
                            <div class="form-group filled" ng-show="vm.alpha != null">
                                <label>Alpha State</label>
                                <select class="form-control" ng-options="datos.name for datos in vm.alpha.states | filter:vm.alphaEntryFilter track by datos.id" ng-model="vm.alphaState">
                                    <option style="display:none" value="" data-translate="entity.select.select">Select</option>
                                </select>
                                <div>
                                    <p class="help-block"
                                       ng-show="!vm.alphaState" data-translate="entity.validation.required">
                                        This field is required.
                                    </p>
                                </div>
                            </div>
                            <div class="form-group filled" ng-hide="vm.alpha || vm.anotherEntryCriteria">
                                <label class="pull-left">Workproduct</label>
                                <select class="form-control" ng-options="datos.name for datos in vm.workProducts track by datos.id"
                                        ng-disabled="vm.alpha || vm.anotherEntryCriteria" ng-model="vm.workProduct">
                                    <option style="display:none" value="" data-translate="entity.select.select">Select</option>
                                </select>
                            </div>
                            <div class="form-group filled" ng-show="vm.workProduct">
                                <label>Level of Detail</label>
                                <select class="form-control" ng-options="datos.name for datos in vm.workProduct.levelsOfDetails | filter:vm.workProductsEntryFilter track by datos.id" ng-model="vm.levelOfDetail">
                                    <option style="display:none" value="" data-translate="entity.select.select">Select</option>
                                </select>
                                <div>
                                    <p class="help-block"
                                       ng-show="!vm.levelOfDetail" data-translate="entity.validation.required">
                                        This field is required.
                                    </p>
                                </div>
                            </div>
                            <div class="form-group" ng-hide="vm.alpha || vm.workProduct">
                                <label>Another Entry Criteria</label>
                                <input type="text" class="form-control" ng-model="vm.anotherEntryCriteria"
                                       ng-disabled="vm.workProduct || vm.alpha ">
                            </div>
                            <div class="pull-right">
                                <button class="btn btn-default" type="button" ng-click="vm.cleanModales()"><span data-translate="practiceManagement.clean">Clean</span></button>
                                <button type="button" class="btn btn-primary" ng-click="vm.addEntry()"><span data-translate="practiceManagement.add">Add</span></button>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">
                            <div class="table-responsive white m-t-50">
                                <table class="table table-full table-full-small white">
                                    <thead>
                                        <tr ng-hide="!vm.activityInEdition.entryCriterion.alphaStates.length &&
                                             !vm.activityInEdition.entryCriterion.workProductsLevelofDetail.length &&
                                             !vm.activityInEdition.entryCriterion.otherConditions.length">
                                            <th>Alpha-State / Workproduct-Level of detail / Other criterion</th>
                                            <th data-translate="practiceManagement.remove">Delete</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="alphaState in vm.activityInEdition.entryCriterion.alphaStates">
                                            <td>{{alphaState.description}}</td>
                                            <td><button class="btn btn-link btn-round" ng-click="vm.deleteEntry($index, 'alpha')"><i class="md md-delete"></i></button></td>
                                        </tr>
                                        <tr ng-repeat="workProductLevelofDetail in vm.activityInEdition.entryCriterion.workProductsLevelofDetail">
                                            <td>{{workProductLevelofDetail.description}}</td>
                                            <td><button class="btn btn-link btn-round" ng-click="vm.deleteEntry($index, 'workproduct')"><i class="md md-delete"></i></button></td>
                                        </tr>
                                        <tr ng-repeat="otherConditions in vm.activityInEdition.entryCriterion.otherConditions track by $index">
                                            <td>{{otherConditions}}</td>
                                            <td><button class="btn btn-link btn-round" ng-click="vm.deleteEntry($index, 'other')"><i class="md md-delete"></i></button></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12">
                        <div class=" table-responsive white m-t-50">
                            <table class="table table-full table-full-small white">
                                <thead>
                                    <tr>
                                        <th class="text-center title-table-activity">
                                            <span data-translate="practiceManagement.thingsToDo.completition">
                                                COMPLETITION
                                            </span>
                                            <button type="button"
                                                    ng-class="!vm.activityInEdition.completitionCriterion.alphaStates.length &&
                                                                !vm.activityInEdition.completitionCriterion.workProductsLevelofDetail.length &&
                                                                !vm.activityInEdition.completitionCriterion.otherConditions.length ?
                                                                'btn btn-sm btn-danger btn-round pull-right':
                                                                'btn btn-sm btn-primary btn-round pull-right'"
                                                    data-toggle="collapse" data-target="#completition"
                                                    title="Create completition">
                                                <i class="fa fa-arrow-down" aria-hidden="true"></i>
                                            </button>
                                        </th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="collapse" id="completition">
                    <div class="row">
                        <div class="col-xs-11 m-l-40">
                            <div class="form-group filled" ng-hide="vm.workProductCompletition || vm.anotherEntryCriteriaCompletition">
                                <label class="pull-left">Alpha</label>
                                <select class="form-control" ng-options="datos.name for datos in vm.alphas track by datos.id" ng-model="vm.alphaCompletition"
                                        ng-disabled="vm.workProductCompletition || vm.anotherEntryCriteriaCompletition">
                                    <option style="display:none" value="" data-translate="entity.select.select">Select</option>
                                </select>
                            </div>
                            <div class="form-group filled" ng-show="vm.alphaCompletition">
                                <label>Alpha State</label>
                                <select class="form-control" ng-options="datos.name for datos in vm.alphaCompletition.states | filter:vm.alphaCompletitionFilter track by datos.id"
                                        ng-model="vm.alphaStateCompletition">
                                    <option style="display:none" value="" data-translate="entity.select.select">Select</option>
                                </select>
                                <div>
                                    <p class="help-block"
                                       ng-show="!vm.alphaStateCompletition" data-translate="entity.validation.required">
                                        This field is required.
                                    </p>
                                </div>
                            </div>
                            <div class="form-group filled" ng-hide="vm.alphaCompletition || vm.anotherEntryCriteriaCompletition">
                                <label class="pull-left">Workproduct</label>
                                <select class="form-control" ng-options="datos.name for datos in vm.workProducts track by datos.id"
                                        ng-disabled="vm.alphaCompletition != null || vm.anotherEntryCriteriaCompletition != null"
                                        ng-model="vm.workProductCompletition">
                                    <option style="display:none" value="" data-translate="entity.select.select">Select</option>
                                </select>
                            </div>
                            <div class="form-group filled" ng-show="vm.workProductCompletition">
                                <label>Level of Detail</label>
                                <select class="form-control" ng-options="datos.name for datos in vm.workProductCompletition.levelsOfDetails | filter:vm.workProductsCompletitionFilter track by datos.id"
                                        ng-model="vm.levelOfDetailCompletition">
                                    <option style="display:none" value="" data-translate="entity.select.select">Select</option>
                                </select>
                                <div>
                                    <p class="help-block"
                                       ng-show="!vm.levelOfDetailCompletition" data-translate="entity.validation.required">
                                        This field is required.
                                    </p>
                                </div>
                            </div>
                            <div class="form-group" ng-hide="vm.alphaCompletition || vm.workProductCompletition">
                                <label>Another Completion Criteria</label>
                                <input type="text" class="form-control" ng-model="vm.anotherEntryCriteriaCompletition"
                                       ng-disabled="vm.workProductCompletition || vm.alphaCompletition">
                            </div>
                            <div class="pull-right">
                                <button class="btn btn-default" type="button" ng-click="vm.cleanModales()">
                                    <span data-translate="practiceManagement.clean">Clean</span>
                                </button>
                                <button type="button" class="btn btn-primary" ng-click="vm.addCompletition()">
                                    <span data-translate="practiceManagement.add">Add</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">
                            <div class=" table-responsive white m-t-50">
                                <table class="table table-full table-full-small white">
                                    <thead>
                                        <tr ng-hide="!vm.activityInEdition.completitionCriterion.alphaStates.length &&
                                            !vm.activityInEdition.completitionCriterion.workProductsLevelofDetail.length &&
                                            !vm.activityInEdition.completitionCriterion.otherConditions.length">
                                            <th>Alpha-State / Workproduct-Level of detail / Other criterion</th>
                                            <th data-translate="practiceManagement.remove">Delete</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="alphaState in vm.activityInEdition.completitionCriterion.alphaStates">
                                            <td>{{alphaState.description}}</td>
                                            <td><button class="btn btn-link btn-round" ng-click="vm.deleteCompletition($index, 'alpha')"><i class="md md-delete"></i></button></td>
                                        </tr>
                                        <tr ng-repeat="workProductLevelofDetail in vm.activityInEdition.completitionCriterion.workProductsLevelofDetail">
                                            <td>{{workProductLevelofDetail.description}}</td>
                                            <td><button class="btn btn-link btn-round" ng-click="vm.deleteCompletition($index, 'workproduct')"><i class="md md-delete"></i></button></td>
                                        </tr>
                                        <tr ng-repeat="otherConditions in vm.activityInEdition.completitionCriterion.otherConditions track by $index">
                                            <td>{{otherConditions}}</td>
                                            <td><button class="btn btn-link btn-round" ng-click="vm.deleteCompletition($index, 'other')"><i class="md md-delete"></i></button></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12">
                        <div class="table-responsive white m-t-50">
                            <table class="table table-full table-full-small white">
                                <thead>
                                    <tr>
                                        <th colspan="5" class="text-center title-table-activity">
                                            <span data-translate="practiceManagement.thingsToDo.resources">
                                                RESOURCES
                                            </span>
                                            <button type="button" class="btn btn-sm btn-primary btn-round pull-right"
                                                    data-toggle="collapse" data-target="#resource"
                                                    title="Create Resource">
                                                <i class="fa fa-arrow-down" aria-hidden="true"></i>
                                            </button>
                                        </th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="collapse" id="resource">
                    <div class="row">
                        <div class="col-xs-11 m-l-40">
                            <div class="form-group">
                                <label for="textArea" data-translate="practiceManagement.description" class="f-bold">Description</label>
                                <fieldset>
                                    <legend></legend>
                                    <div class="form-group">
                                        <text-angular-toolbar name="toolbar7" ta-toolbar="[['h1','h2','h3','h4','p','redo','undo','indent','outdent']]"></text-angular-toolbar>
                                        <text-angular-toolbar name="toolbar8" ta-toolbar="[['bold','italics','underline','strikeThrough','ul','ol'],['justifyLeft','justifyCenter','justifyRight','justifyFull']]"></text-angular-toolbar>
                                        <text-angular ng-model="vm.descriptionResource" ta-target-toolbars='toolbar7,toolbar8,toolbar9'></text-angular>
                                        <text-angular-toolbar name="toolbar9" ta-toolbar="[['html', 'charcount', 'wordcount']]"></text-angular-toolbar>
                                    </div>
                                </fieldset>
                            </div>
                            <div class="form-group filled">
                                <label class="pull-left" data-translate="practiceManagement.thingsToDo.type">Type</label>
                                <select class="form-control" ng-options="datos.name for datos in vm.resourcesTypes track by datos.id" ng-model="vm.type">
                                    <option style="display:none" value="" data-translate="entity.select.select">Select</option>
                                </select>
                            </div>
                            <div class="form-group" ng-show="vm.type.id != 'URL'">
                                <label class="control-label" data-translate="practiceManagement.thingsToDo.attachment">Attachment</label>
                                <input type="file" base-sixty-four-input ng-model="vm.attachment" style="color: transparent"
                                       accept="image/*, video/*, audio/*, .doc,.docx,.pdf,.ppt,.pptx,.pps,.ppsx,.odt,.xls,.xlsx,.zip">
                            </div>
                            <div class="form-group" ng-show="vm.type.id == 'URL'">
                                <label class="control-label" data-translate="practiceManagement.thingsToDo.url">URL</label>
                                <input type="url" class="form-control" ng-model="vm.url">
                            </div>
                            <div class="form-group" ng-show="vm.attachment && vm.type.id != 'URL'">
                                <label class="control-label"><span data-translate="practiceManagement.thingsToDo.file">File</span>: {{vm.attachment.filename}}</label>
                                <br />
                                <label class="control-label"><span data-translate="practiceManagement.thingsToDo.size">Size</span>: {{vm.byteSize(vm.attachment.base64)}}</label>
                            </div>
                            <div class="pull-right">
                                <button class="btn btn-default" type="button" ng-click="vm.cleanModales()"><span data-translate="practiceManagement.clean">Clean</span></button>
                                <button type="button" class="btn btn-primary" ng-click="vm.addResource()"><span data-translate="practiceManagement.add">Add</span></button>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">
                            <div class="table-responsive white m-t-50">
                                <table class="table table-full table-full-small white">
                                    <thead>
                                        <tr ng-hide="!vm.activityInEdition.resources.length">
                                            <th data-translate="practiceManagement.thingsToDo.content">Content</th>
                                            <th data-translate="practiceManagement.thingsToDo.type">Type</th>
                                            <th data-translate="practiceManagement.thingsToDo.attachment">Attachment</th>
                                            <th data-translate="practiceManagement.thingsToDo.size">Size</th>
                                            <th data-translate="practiceManagement.remove">Delete</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="resource in vm.activityInEdition.resources">
                                            <td><div ng-bind-html="resource.content"></div></td>
                                            <td>{{resource.idTypeResource}}</td>
                                            <td>
                                                <div ng-if="resource.idTypeResource != 'URL'">
                                                    <a ng-click="vm.downloadFile(resource.fileType, resource)">
                                                        {{resource.fileName}}
                                                    </a>
                                                </div>
                                                <div ng-if="resource.idTypeResource == 'URL'">
                                                    <a href="{{resource.fileName}}" target="_blank">
                                                        {{resource.fileName}}
                                                    </a>
                                                </div>
                                            </td>
                                            <td>{{vm.byteSize(resource.idTypeResource)}}</td>
                                            <td><button class="btn btn-link btn-round" ng-click="vm.deleteResource()"><i class="md md-delete"></i></button></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row m-t-50 ">
                <div class="col-xs-12 form-group">
                    <button class="btn btn-success pull-right" type="button" ng-click="vm.addActivity()"><span data-translate="practiceManagement.add">Add</span></button>
                    <button class="btn btn-default pull-right m-r-15" type="button" ng-click="vm.clean()"><span data-translate="practiceManagement.clean">Clean</span></button>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="pull-right m-b-50">
            <!-- <button type="button" class="btn btn-default m-t-10" ng-click="vm.clean()">
                <span>Clean</span>
            </button> -->
            <button type="submit" class="btn btn-primary m-t-10" ng-click="vm.save()">
                <span class="glyphicon glyphicon-save"></span>
                <span data-translate="entity.action.save">Save</span>
            </button>
        </div>
    </div>
</section>

<!-- MODALES -->
<div class="modal fade" id="compositionActivitiesDialog" tabindex="-1" role="dialog"
     aria-labelledby="myModalLabel">
    <div class="modal-dialog">
        <div class="modal-header">
            <button type="button" class="close" ng-click="vm.cleanModales()" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title"><span data-translate="practiceManagement.thingsToDo.compositionActivities">Composition Activities</span></h4>
        </div>
        <div class="modal-body">
            <go-diagram go-model="vm.model" style="border: solid 1px gray; color:white; width:100%; height:400px"></go-diagram>
            <!--Selec start activity : {{vm.model.selectedNodeData.name}} {{vm.model.selectedNodeData.key}}
            Number of links: {{vm.model.linkDataArray.length}}-->
        </div>
        <div class="modal-footer">
            <button class="btn btn-default" type="button" ng-click="vm.cleanCompositionActivities()"><span data-translate="practiceManagement.clean">Clean</span></button>
            <button type="button" class="btn btn-primary" ng-click="vm.addCompositionActivities()"><span data-translate="practiceManagement.save">Save</span></button>
        </div>
    </div>
</div>





